# Tmux 快速入门指南

基于人体工学键位配置的一步步教程

---

## 什么是 Tmux？

Tmux 是一个终端复用器，让你可以在一个终端窗口中运行多个终端会话。

**核心概念：**
- **会话 (Session)** - 最高层，包含多个窗口
- **窗口 (Window)** - 包含多个面板
- **面板 (Pane)** - 实际的终端，可以水平或垂直分割

---

## 第一步：启动 Tmux

```bash
tmux
```

启动后，你会看到底部的状态栏，显示当前会话名称和窗口信息。

**退出 Tmux：**
```bash
exit
```

---

## 第二步：分割面板（最重要！）

这是 tmux 最常用的功能 - 分屏操作！

### 水平分割（上下分屏）

按 `Ctrl+a` 然后按 `-`

```
┌─────────────┐
│   上方面板   │
├─────────────┤
│   下方面板   │
└─────────────┘
```

### 垂直分割（左右分屏）

按 `Ctrl+a` 然后按 `|`

```
┌──────┬──────┐
│ 左侧 │ 右侧 │
│ 面板 │ 面板 │
└──────┴──────┘
```

**练习：**
1. 启动 tmux
2. 按 `Ctrl+a` 然后 `-` 水平分割
3. 按 `Ctrl+a` 然后 `|` 垂直分割

---

## 第三步：在面板之间移动

使用九宫格式的键位 `u/i/o/j/k/l`（小写）：

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+a` 然后 `u` | 移动到左上对角线面板 |
| `Ctrl+a` 然后 `i` | 移动到上面的面板 |
| `Ctrl+a` 然后 `o` | 移动到右上对角线面板 |
| `Ctrl+a` 然后 `j` | 移动到左边的面板 |
| `Ctrl+a` 然后 `k` | 移动到下面的面板 |
| `Ctrl+a` 然后 `l` | 移动到右边的面板 |

**记忆技巧：** 九宫格布局

```
u  i  o
j  k  l
```

- u - 左上
- i - 上
- o - 右上
- j - 左
- k - 下
- l - 右

**练习：**
1. 创建多个面板
2. 用 ijkl 在面板间移动
3. 尝试用 u 和 o 进行对角线移动

---

## 第四步：调整面板大小

按住 `Alt` 键，然后使用 `i/j/k/l`（小写）：

| 快捷键 | 功能 |
|--------|------|
| `Alt+j` | 向左扩大 5 格 |
| `Alt+k` | 向下扩大 5 格 |
| `Alt+i` | 向上扩大 5 格 |
| `Alt+l` | 向右扩大 5 格 |

**练习：**
1. 创建一个垂直分割的面板
2. 用 `Alt+l` 扩大右侧面板
3. 用 `Alt+j` 扩大左侧面板

---

## 第五步：管理窗口

窗口就像浏览器标签页。

### 创建新窗口

`Ctrl+a` 然后 `c`

### 切换窗口

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+a` 然后 `p` | 上一个窗口 |
| `Ctrl+a` 然后 `n` | 下一个窗口 |
| `Ctrl+a` 然后 `数字` | 跳转到指定窗口 |

### 关闭窗口

`exit` 或 `Ctrl+d`

**练习：**
1. 创建 3 个窗口（用 `Ctrl+a c`）
2. 在不同窗口间切换
3. 在窗口内创建面板

---

## 第六步：关闭面板

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+a` 然后 `q` | 关闭当前面板 |
| `exit` 或 `Ctrl+d` | 关闭当前面板/窗口 |

---

## 第七步：detach 和 attach（核心功能！）

这是 tmux 最强大的功能 - 保持会话运行，随时回来！

### Detach（分离）

保持所有进程运行，暂时退出 tmux：

`Ctrl+a` 然后 `d`

### Attach（重新连接）

查看所有 tmux 会话：
```bash
tmux ls
```

重新连接到最后一个会话：
```bash
tmux attach
```

重新连接到指定会话：
```bash
tmux attach -t 会话名
```

**实际场景：**
1. 在 tmux 里启动一个长时间运行的任务（比如 `npm install`）
2. `Ctrl+a d` 分离会话，可以关闭终端
3. 随时回来：`tmux attach`，任务还在运行！

---

## 快速参考卡

```
┌─────────────────────────────────────────────────────────┐
│                        快捷键大全                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  前缀键: Ctrl + a                                       │
│                                                         │
│  ┌─────────────── 面板操作 ───────────────┐            │
│  │  |   垂直分割    -   水平分割            │            │
│  │  i/j/k/l/u/o  切换面板 (九宫格)          │            │
│  │  Alt+i/j/k/l  调整大小                  │            │
│  │  q          关闭面板                    │            │
│  │                                         │            │
│  │  布局: u i o (左上/上/右上)             │            │
│  │        j k l (左/下/右)                 │            │
│  └─────────────────────────────────────────┘            │
│                                                         │
│  ┌─────────────── 窗口操作 ────────────────┐            │
│  │  c          创建新窗口                  │            │
│  │  p/n        上一个/下一个窗口           │            │
│  │  数字        跳转窗口                    │            │
│  └─────────────────────────────────────────┘            │
│                                                         │
│  ┌─────────────── 会话操作 ────────────────┐            │
│  │  d          分离会话                    │            │
│  │  $          重命名会话                   │            │
│  │  tmux ls     查看所有会话               │            │
│  │  tmux attach 重新连接                    │            │
│  └─────────────────────────────────────────┘            │
│                                                         │
│  ┌─────────────── 其他 ───────────────────┐            │
│  │  r          重新加载配置                │            │
│  │  ?          查看所有快捷键              │            │
│  └─────────────────────────────────────────┘            │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 常见场景演练

### 场景 1：前后端开发同时进行

```
┌─────────────────────────────────────────────┐
│         后端服务器 (窗口 1)                   │
├─────────────────────────────────────────────┤
│         前端开发 (窗口 2)                     │
│ ┌──────────────┬──────────────┐             │
│ │  代码编辑器   │  前端服务器   │             │
│ │  (面板 1)     │  (面板 2)    │             │
│ └──────────────┴──────────────┘             │
│         终端 (窗口 3)                        │
└─────────────────────────────────────────────┘
```

### 场景 2：远程开发

```bash
# 1. 在远程服务器启动 tmux
ssh user@server
tmux

# 2. 在 tmux 里启动开发环境

# 3. 分离会话
Ctrl+a d

# 4. 退出 ssh，随时回来
ssh user@server
tmux attach
```

---

## 进阶提示

### 查看所有快捷键

`Ctrl+a` 然后 `?`

### 重命名会话

`Ctrl+a` 然后 `$`

### 重命名窗口

`Ctrl+a` 然后 `,`

### 同步输入（多个面板同时输入）

`Ctrl+a` 然后 `:` 输入 `:setw synchronize-panes on`

---

## 故障排查

### 配置不生效？

```bash
tmux source-file ~/.tmux.conf
```

### 想恢复默认配置？

```bash
mv ~/.tmux.conf ~/.tmux.conf.bak
tmux
```

---

## 开始练习！

1. 运行 `tmux` 启动
2. 用 `-` 和 `|` 分割面板
3. 用 `i/j/k/l` 在面板间移动
4. 用 `Alt+i/j/k/l` 调整大小
5. 创建多个窗口
6. 分离会话再重新连接
7. 开始真正高效使用 tmux！

**记住：多练习才是掌握的捷径！**
