# ğŸ³ Dockeré•œåƒéƒ¨ç½²åˆ°RailwayæŒ‡å—

## ğŸ“‹ æ¦‚è¿°
æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•å°†å‰åç«¯æ‰“åŒ…æˆå•ä¸ªDockeré•œåƒå¹¶éƒ¨ç½²åˆ°Railwayã€‚

## ğŸ—ï¸ æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Railway App   â”‚
â”‚  Port 80 (HTTP) â”‚
â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚             â”‚             â”‚
â”‚  â–¼             â–¼             â”‚
â”‚ Nginx (80) â”€â”€â” â”‚ Backend     â”‚
â”‚              â”‚ â”‚ (8089)      â”‚
â”‚   Frontend   â”‚ â”‚             â”‚
â”‚   SPA        â”‚ â”‚             â”‚
â”‚              â”‚ â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### 1. æ„å»ºå¹¶æ¨é€Dockeré•œåƒ

```bash
# ç¡®ä¿å·²ç™»å½•Docker Hub
docker login

# æ„å»ºå¹¶æ¨é€ï¼ˆå°†your-dockerhub-usernameæ›¿æ¢ä¸ºä½ çš„Docker Hubç”¨æˆ·åï¼‰
export DOCKER_USERNAME=your-dockerhub-username
chmod +x build-and-push.sh
./build-and-push.sh
```

### 2. éƒ¨ç½²åˆ°Railway

#### æ–¹æ³•A: ä½¿ç”¨Dockeré•œåƒï¼ˆæ¨èï¼‰
1. è®¿é—® [railway.app](https://railway.app)
2. ç™»å½•å¹¶ç‚¹å‡» "New Project" â†’ "Deploy from Docker Image"
3. è¾“å…¥é•œåƒåï¼š`your-dockerhub-username/spike-approval:latest`
4. ç‚¹å‡» "Deploy"

#### æ–¹æ³•B: ç›´æ¥ä»GitHubæ„å»º
1. å°†ä»£ç æ¨é€åˆ°GitHub
2. Railway â†’ "New Project" â†’ "Deploy from GitHub repo"
3. é€‰æ‹©ä½ çš„ä»“åº“
4. Railwayä¼šè‡ªåŠ¨è¯†åˆ«Dockerfile.unifiedå¹¶æ„å»º

### 3. é…ç½®Railway

#### ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœéœ€è¦ï¼‰
åœ¨Railwayé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ï¼š
- `NODE_ENV=production`
- å…¶ä»–åº”ç”¨é…ç½®

#### å¥åº·æ£€æŸ¥
åº”ç”¨å·²å†…ç½®å¥åº·æ£€æŸ¥ï¼š
- è·¯å¾„ï¼š`/health`
- ç«¯å£ï¼š`80`

## ğŸ“ æ–‡ä»¶è¯´æ˜

### Dockerfile.unified
- å¤šé˜¶æ®µæ„å»ºï¼ŒåŒ…å«å‰ç«¯æ„å»ºå’Œåç«¯ç¼–è¯‘
- åŸºäºAlpine Linuxï¼Œé•œåƒä½“ç§¯å°
- é›†æˆNginxä½œä¸ºåå‘ä»£ç†

### nginx.conf
- é…ç½®Nginxåœ¨80ç«¯å£æä¾›é™æ€æ–‡ä»¶
- APIè¯·æ±‚ä»£ç†åˆ°åç«¯8089ç«¯å£
- æ”¯æŒReact Routerçš„SPAè·¯ç”±

### start.sh
- å¯åŠ¨è„šæœ¬ï¼ŒåŒæ—¶è¿è¡ŒNginxå’Œåç«¯
- åŒ…å«å¥åº·æ£€æŸ¥é€»è¾‘

### railway.toml
- Railwayé…ç½®æ–‡ä»¶
- è®¾ç½®å¥åº·æ£€æŸ¥å’Œé‡å¯ç­–ç•¥

## ğŸ”§ æœ¬åœ°æµ‹è¯•

```bash
# æ„å»ºæœ¬åœ°é•œåƒ
docker build -f Dockerfile.unified -t spike-approval:local .

# è¿è¡Œæµ‹è¯•
docker run -p 80:80 spike-approval:local

# æµ‹è¯•
curl http://localhost/health
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### Railwayç›‘æ§
- è®¿é—®Railway DashboardæŸ¥çœ‹å®æ—¶æ—¥å¿—
- ç›‘æ§CPUã€å†…å­˜å’Œè¯·æ±‚ç»Ÿè®¡

### å¥åº·æ£€æŸ¥
- è‡ªåŠ¨å¥åº·æ£€æŸ¥ï¼š`/health`
- å¤±è´¥æ—¶è‡ªåŠ¨é‡å¯

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æ„å»ºå¤±è´¥**
   - æ£€æŸ¥Docker Hubè¿æ¥
   - ç¡®è®¤æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨æ­£ç¡®ä½ç½®

2. **éƒ¨ç½²åæ— æ³•è®¿é—®**
   - æ£€æŸ¥Railwayæ—¥å¿—
   - ç¡®è®¤å¥åº·æ£€æŸ¥é€šè¿‡
   - éªŒè¯ç«¯å£é…ç½®

3. **APIè¯·æ±‚å¤±è´¥**
   - æ£€æŸ¥nginxé…ç½®
   - ç¡®è®¤åç«¯å¯åŠ¨æ­£å¸¸

### è°ƒè¯•å‘½ä»¤
```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs <container-id>

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it <container-id> sh

# æµ‹è¯•åç«¯
curl http://localhost:8089/actuator/health
```

## ğŸ’° æˆæœ¬

### Railwayå…è´¹é¢åº¦
- $5/æœˆä¿¡ç”¨é¢åº¦
- è¶³å¤Ÿè¿è¡Œå°å‹åº”ç”¨
- ä¼‘çœ ï¼š15åˆ†é’Ÿæ— è®¿é—®åä¼‘çœ 

### Docker Hub
- æ— é™å…¬å…±ä»“åº“
- ç§æœ‰ä»“åº“æœ‰é™åˆ¶

## ğŸ”„ æ›´æ–°éƒ¨ç½²

```bash
# ä»£ç æ›´æ–°å
./build-and-push.sh v1.0.1

# Railwayä¼šè‡ªåŠ¨æ‹‰å–æ–°æ ‡ç­¾
# æˆ–æ‰‹åŠ¨æ›´æ–°Railwayä¸­çš„é•œåƒç‰ˆæœ¬
```

## ğŸ“ ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **å®‰å…¨**: ä½¿ç”¨HTTPSï¼ˆRailwayè‡ªåŠ¨æä¾›ï¼‰
2. **ç›‘æ§**: è®¾ç½®å‘Šè­¦é€šçŸ¥
3. **å¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®
4. **åŸŸå**: ç»‘å®šè‡ªå®šä¹‰åŸŸå
5. **CDN**: åˆ©ç”¨Railwayå†…ç½®CDN

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] Docker Hubå·²ç™»å½•
- [ ] æ„å»ºè„šæœ¬æ‰§è¡ŒæˆåŠŸ
- [ ] é•œåƒæ¨é€åˆ°Docker Hub
- [ ] Railwayé¡¹ç›®åˆ›å»º
- [ ] éƒ¨ç½²å®Œæˆä¸”å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] APIè¯·æ±‚æ­£å¸¸å·¥ä½œ

---

ğŸ‰ **æ­å–œï¼ä½ çš„åº”ç”¨å·²ç»æˆåŠŸéƒ¨ç½²åˆ°Railwayï¼**